but a u.s. appeals court in san francisco disagreed and upheld the law.