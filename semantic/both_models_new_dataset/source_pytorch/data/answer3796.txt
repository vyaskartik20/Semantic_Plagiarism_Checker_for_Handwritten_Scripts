Greece reaches agreement with troika