the s&p 500 and the nasdaq indexes recorded their third straight week of gains.